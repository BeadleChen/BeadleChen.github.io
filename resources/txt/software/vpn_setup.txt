
<h3>一、 VPN的介绍</h3>
<p>
　　VPN(Virtual Private Network)虚拟专用网络，属于远程访问技术，简单地说就是利用</br>
公用网络架设专用网络。例如某公司员工出差到外地，他想访问企业内网的服务器资源，</br>
这种访问就属于远程访问。</br>
　　让外地员工访问到内网资源，利用VPN的解决方法就是在内网中架设一台VPN服务器。外地员工</br>
在当地连上互联网后，通过互联网连接VPN服务器，然后通过VPN服务器进入企业内网。为了保证</br>
数据安全，VPN服务器和客户机之间的通讯数据都进行了加密处理。有了数据加密，就可以认为</br>
数据是在一条专用的数据链路上进行安全传输，就如同专门架设了一个专用网络一样，但实际上</br>
VPN使用的是互联网上的公用链路，因此VPN称为虚拟专用网络，其实质上就是利用加密技术在</br>
公网上封装出一个数据通讯隧道。有了VPN技术，用户无论是在外地出差还是在家中办公，只要</br>
能上互联网就能利用VPN访问内网资源，这就是VPN在企业中应用得如此广泛的原因。</br>
</p>


<h3>二、 实现原理</h3>
<p>
　　由于公共IP的短缺，我们在组建局域网时，通常使用保留地址作为内部IP，（比如最常用的C类保留地址：</br>
192.168.0.0－192.168.255.255）这些地址是不会被互联网分配的，因此它们在互联网上也无法被路由的，</br>
所以在正常情况下无法直接通过Internet外网访问到在局域网内的主机。为了实现这一目的，需要使用VPN</br>
隧道技术建立一个虚拟专用网络。</br>

　　比如，一个企业的总部A网络中搭建的ERP系统服务器（假设IP为192.168.1.251），总部的计算机可以通过</br>
内网地址进行直接访问，但在外地的分公司B无法通过Internet外网访问这台服务器的内网地址。那么，</br>
分公司B就只能通过虚拟专用网络接入到总部A的局域网内来访问这台服务器。</br>
</p>
<img src="http://hiphotos.baidu.com/exp/pic/item/1cd4147b02087bf42042bb00f0d3572c10dfcf6a.jpg" 
style="margin-top:0px;width:100%;">

<p>
　　VPN网关一般会采用双网卡结构，内网卡接入公司总部A的内部局域网络，外网卡使用公共IP接入Internet。</br>
　　比如说分公司B的终端（192.168.2.2）需要访问总部A的服务器（192.168.1.252），其发出的访问数据包的</br>
目标地址为服务器的IP：192.168.1.252。</br>
　　分公司B局域网的VPN网关在接收到终端（192.168.2.2）发出的访问数据包①时对其目标地址</br>
（192.168.1.252）进行检查，发现目标地址属于公司总部A网络的地址，于是将该数据包①根据</br>
所采用的VPN技术进行封装，同时VPN网关会构造一个新的VPN数据包②，并将封装后的原数据包</br>
①作为VPN数据包②的负载，VPN数据包的目标地址为公司总部A网络的VPN网关的公共IP地址。</br>
　　分公司B局域网的VPN网关将VPN数据包发送到Internet外网中，由于VPN数据包的目标地址是总部</br>
A网络的VPN网关的外部地址，所以该数据包将被Internet中的路由正确地发送到总部A网络的VPN网关</br>
　　总部A网络的VPN网关对接收到的数据包②进行检查，如果发现该数据包是从分公司B网络的VPN网关发出</br>
的，即可判定该数据包为VPN数据包，并对该数据包进行解包。解包的过程主要是将VPN数据包的包头剥离，</br>
将负载通VPN技术反向处理还原成原始的数据包①</br>
　　总部A网络的VPN网关将还原后的原始数据包发送至目标服务器（192.168.1.252）。在服务器</br>
（192.168.1.252）看来，它收到的数据包就跟从终端（192.168.2.2）直接发过来的一样。</br>

</p>

<h3>二、 Win7搭建VPN</h3>

<p>
1.点击右下角的网络图标，然后选择“打开网络和共享中心”，再选择“更改适配器设置”。</br>
2.然后在“菜单栏”（如果没有看到菜单栏，请按下键盘上的Alt按键，即可显示菜单栏）</br>
点击“文件”，选择“新建传入连接”。</br>
3.选择允许使用VPN连接到本机的用户，如果用户还未创建，请点击“添加用户”选择其他</br>
用户连接VPN的方式，这里选择“通过Internet”，如果你的显示多项，请选择正确的方式。</br>
4.接着设置网络参数，如果对方连接后可以使用本地网络的DHCP服务器，那么可以跳过此设置。</br>
如果本地网络没有DHCP服务器，必须就必须设置一下，请点击“Internet 协议版本 4(TCP/IP)”，</br>
点“属性”按钮，选择“指定IP地址”，比如我的IP是192.168.1开头的，那么这里设置一个没有</br>
被使用的IP段即可，比如从192.168.1.180到192.168.1.199。设置后请按确定， 然后点击“允许访问”。</br>
5.按照上述设置之后，其他用户就可以利用上面的帐号以及你的IP地址利用VPN连接到你的网络了。</br>
关于防火墙用户：如果你有防火墙请允许1723和1701端口。</br>
</p>



